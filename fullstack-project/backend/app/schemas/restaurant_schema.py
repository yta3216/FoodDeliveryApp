"""
This module defines the basic restaurant schema for the application.
This includes the menu details as well.

Any updates to the restaurant details should follow this schema.
"""

from typing import List
from pydantic import BaseModel

# Menu item model
class MenuItem(BaseModel):
    id: int
    name: str
    price: float
    tags: List[str] = []  # Optional tags for the menu item (spicy, vegetarian, etc.)

# Menu model
class Menu(BaseModel):
    restaurant_id: int
    items: List[MenuItem]

# Restaurant model
class Restaurant(BaseModel):
    id: int
    name: str
    city: str
    address: str
    manager_ids: List[str]  # List of user IDs who are managers of the restaurant
    menu: Menu

# Menu Item Create model for input validation when creating a new menu item.
class MenuItem_Create(BaseModel):
    name: str
    price: float
    tags: List[str] = []

# Menu Item Update model for input validation when updating menu item details.
class MenuItem_Update(BaseModel):
    name: str
    price: float
    tags: List[str] = []

# Menu Update model for input validation when updating menu details.
# Note that Menu Create is not needed, since an empty menu is created automatically when a restaurant is created.
class Menu_Update(BaseModel):
    items: List[MenuItem_Create]

# Restaurant Create model for input validation when creating a new restaurant.
# This does not include the 'id' field since it is generated by the system.
# It also does not include the 'menu' field since it is created after the restaraunt is created.
class Restaurant_Create(BaseModel):
    name: str
    city: str
    address: str
    manager_id: str  # when a restaurant is created, only the logged in user is the manager

# Restaurant Details Update model for input validation when updating restaurant details.
class Restaurant_Details_Update(BaseModel):
    id: int
    name: str 
    city: str
    address: str

# Restaurant Managers Update model for input validation when updating restaurant managers.
class Restaurant_Managers_Update(BaseModel):
    id: int
    manager_ids: List[str]
